module.exports=[96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},31068,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(96221),f=a.i(210);let g=(0,a.i(70106).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);function h(){let a,h,i=(0,d.useRouter)(),[j,k]=(0,c.useState)("phone"),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(["","","","","",""]),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(0),v=(0,c.useRef)([]),w=a=>{let b=a.replace(/\D/g,"");return b.length<=2?b:b.length<=4?`${b.slice(0,2)} ${b.slice(2)}`:b.length<=6?`${b.slice(0,2)} ${b.slice(2,4)} ${b.slice(4)}`:b.length<=8?`${b.slice(0,2)} ${b.slice(2,4)} ${b.slice(4,6)} ${b.slice(6)}`:`${b.slice(0,2)} ${b.slice(2,4)} ${b.slice(4,6)} ${b.slice(6,8)} ${b.slice(8,10)}`};(0,c.useEffect)(()=>{if(t>0){let a=setTimeout(()=>u(t-1),1e3);return()=>clearTimeout(a)}},[t]);let x=async a=>{a.preventDefault(),s(""),q(!0);try{let a=await fetch("http://localhost:3333/api/admin/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:l})}),b=await a.json();if(!a.ok)throw Error(b.error||"Erreur lors de l'envoi");k("otp"),u(300),o(["","","","","",""]),setTimeout(()=>v.current[0]?.focus(),100)}catch(a){s(a.message)}finally{q(!1)}},y=a=>{a.preventDefault();let b=a.clipboardData.getData("text").toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,6),c=[...n];for(let a=0;a<b.length;a++)c[a]=b[a];o(c),6===b.length?z(b):v.current[b.length]?.focus()},z=async a=>{s(""),q(!0);let b=a||n.join("");try{let a=await fetch("http://localhost:3333/api/admin/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:l,otp:b})}),c=await a.json();if(!a.ok)throw Error(c.error||"Code invalide");localStorage.setItem("admin_token",c.token),localStorage.setItem("admin_data",JSON.stringify(c.admin)),i.push("/admin")}catch(a){s(a.message),o(["","","","","",""]),v.current[0]?.focus()}finally{q(!1)}},A=async()=>{if(!(t>0)){s(""),q(!0);try{let a=await fetch("http://localhost:3333/api/admin/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:l})});if(!a.ok){let b=await a.json();throw Error(b.error||"Erreur")}u(300),o(["","","","","",""])}catch(a){s(a.message)}finally{q(!1)}}};return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Santé Vitalité"}),(0,b.jsx)("p",{className:"text-white/50 mt-2",children:"Panneau d'administration"})]}),(0,b.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:"phone"===j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-black flex items-center justify-center",children:(0,b.jsx)(g,{className:"w-5 h-5 text-white"})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Connexion Sécurisée"})]}),(0,b.jsx)("p",{className:"text-gray-500 mb-6",children:"Entrez votre numéro de téléphone autorisé pour recevoir un code de connexion."}),r&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:r}),(0,b.jsxs)("form",{onSubmit:x,className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numéro de téléphone"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"+225"}),(0,b.jsx)("div",{className:"w-px h-5 bg-gray-300"})]}),(0,b.jsx)("input",{type:"tel",value:w(l),onChange:a=>m(a.target.value.replace(/\D/g,"").slice(0,10)),className:"w-full pl-[85px] pr-4 py-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all text-lg tracking-wide",placeholder:"07 XX XX XX XX",required:!0})]})]}),(0,b.jsx)("button",{type:"submit",disabled:p||l.length<10,className:"w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-gray-800 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Loader2,{className:"w-5 h-5 animate-spin"}),"Envoi en cours..."]}):"Recevoir le code SMS"})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>k("phone"),className:"flex items-center gap-2 text-gray-500 hover:text-black mb-4 transition-colors",children:[(0,b.jsx)(f.ArrowLeft,{className:"w-4 h-4"}),"Changer de numéro"]}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vérification"}),(0,b.jsxs)("p",{className:"text-gray-500 mb-6",children:["Entrez le code à 6 caractères envoyé au ",(0,b.jsxs)("span",{className:"font-semibold text-black",children:["+225 ",w(l)]})]}),r&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:r}),(0,b.jsx)("div",{className:"flex gap-2 justify-center mb-6",children:n.map((a,c)=>(0,b.jsx)("input",{ref:a=>{v.current[c]=a},type:"text",value:a,onChange:a=>{let b,d;return b=a.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(-1),void((d=[...n])[c]=b,o(d),b&&c<5&&v.current[c+1]?.focus(),d.every(a=>""!==a)&&5===c&&z(d.join("")))},onKeyDown:a=>{"Backspace"===a.key&&!n[c]&&c>0&&v.current[c-1]?.focus()},onPaste:0===c?y:void 0,className:"w-12 h-14 text-center text-xl font-bold border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-black focus:border-black outline-none transition-all uppercase",maxLength:1,disabled:p},c))}),(0,b.jsx)("div",{className:"text-center mb-6",children:t>0?(0,b.jsxs)("p",{className:"text-gray-500 text-sm",children:["Code expire dans ",(0,b.jsx)("span",{className:"font-bold text-black",children:(a=Math.floor(t/60),h=t%60,`${a}:${h.toString().padStart(2,"0")}`)})]}):(0,b.jsx)("button",{onClick:A,disabled:p,className:"text-black font-semibold text-sm hover:underline disabled:opacity-50",children:"Renvoyer le code"})}),(0,b.jsx)("button",{onClick:()=>z(),disabled:p||n.some(a=>!a),className:"w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-gray-800 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Loader2,{className:"w-5 h-5 animate-spin"}),"Vérification..."]}):"Se connecter"})]})}),(0,b.jsx)("p",{className:"text-center text-white/40 text-sm mt-6",children:"Seuls les numéros autorisés peuvent se connecter."})]})})}a.s(["default",()=>h],31068)}];

//# sourceMappingURL=_20bb4091._.js.map