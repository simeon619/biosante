{"version":3,"sources":["../../../../app/admin/payments/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport {\n    useQuery,\n    useMutation,\n    useQueryClient\n} from '@tanstack/react-query';\nimport {\n    CheckCircle,\n    XCircle,\n    Clock,\n    AlertTriangle,\n    Search,\n    ChevronRight,\n    ChevronLeft,\n    ExternalLink,\n    Smartphone,\n    User,\n    Calendar,\n    DollarSign\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { cn, API_URL } from '@/lib/utils';\n\ninterface Payment {\n    id: number;\n    order_id: string;\n    provider: string;\n    reference: string;\n    moneroo_payment_id: string;\n    payment_method: string;\n    amount_expected: number;\n    trust_score: number;\n    status: 'pending' | 'confirmed' | 'rejected';\n    rejection_reason: string | null;\n    customer_name: string;\n    order_total: number;\n    order_date: string;\n    created_at: string;\n}\n\nexport default function AdminPaymentsPage() {\n    const queryClient = useQueryClient();\n    const [searchTerm, setSearchTerm] = useState('');\n    const [dbSearchTerm, setDbSearchTerm] = useState(''); // Only updates on submit\n    const [statusFilter, setStatusFilter] = useState('all');\n    const [providerFilter, setProviderFilter] = useState('all');\n    const [currentPage, setCurrentPage] = useState(1);\n    const [selectedPayment, setSelectedPayment] = useState<Payment | null>(null);\n\n    // Fetch Payments with useQuery\n    const { data: result, isLoading, isPlaceholderData } = useQuery({\n        queryKey: ['admin', 'payments', statusFilter, providerFilter, dbSearchTerm, currentPage],\n        queryFn: async () => {\n            const token = localStorage.getItem('admin_token');\n            const adminData = JSON.parse(localStorage.getItem('admin_data') || '{}');\n\n            const params = new URLSearchParams({\n                status: statusFilter,\n                provider: providerFilter,\n                search: dbSearchTerm,\n                page: currentPage.toString(),\n                limit: '6'\n            });\n\n            const response = await fetch(`${API_URL}/api/admin/payments?${params.toString()}`, {\n                headers: {\n                    'Authorization': `Bearer ${token}`,\n                    'X-Admin-Id': adminData.id\n                }\n            });\n            if (!response.ok) throw new Error('Network response was not ok');\n            return response.json();\n        },\n        placeholderData: (previousData) => previousData, // keep data visible during next page load\n    });\n\n    const payments = result?.data || [];\n    const paginationMeta = result?.meta || null;\n\n    // Handle Confirm/Reject with useMutation\n    const actionMutation = useMutation({\n        mutationFn: async ({ paymentId, status, reason }: { paymentId: number, status: 'confirmed' | 'rejected', reason: string | null }) => {\n            const token = localStorage.getItem('admin_token');\n            const adminData = JSON.parse(localStorage.getItem('admin_data') || '{}');\n            const response = await fetch(`${API_URL}/api/admin/payments/${paymentId}/confirm`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`,\n                    'X-Admin-Id': adminData.id\n                },\n                body: JSON.stringify({ status, reason })\n            });\n\n            if (!response.ok) {\n                const err = await response.json();\n                throw new Error(err.message || 'Erreur lors de l\\'action');\n            }\n            return response.json();\n        },\n        onSuccess: () => {\n            // Invalidate and refetch payments\n            queryClient.invalidateQueries({ queryKey: ['admin', 'payments'] });\n            setSelectedPayment(null);\n        },\n        onError: (error: any) => {\n            alert(error.message);\n        }\n    });\n\n    const handleSearch = (e: React.FormEvent) => {\n        e.preventDefault();\n        setCurrentPage(1);\n        setDbSearchTerm(searchTerm);\n    };\n\n    const handleAction = (paymentId: number, status: 'confirmed' | 'rejected') => {\n        const reason = status === 'rejected' ? prompt('Raison du rejet ?') : null;\n        if (status === 'rejected' && reason === null) return;\n        actionMutation.mutate({ paymentId, status, reason });\n    };\n\n    const getTrustColor = (score: number) => {\n        if (score >= 80) return 'text-green-500 bg-green-500/10 border-green-500/20';\n        if (score >= 50) return 'text-orange-500 bg-orange-500/10 border-orange-500/20';\n        return 'text-red-500 bg-red-500/10 border-red-500/20';\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-6\">\n                <div>\n                    <h1 className=\"text-3xl font-black text-slate-900 tracking-tight flex items-center gap-3\">\n                        <DollarSign className=\"w-8 h-8 text-indigo-600\" />\n                        Gestion des Paiements\n                        {isPlaceholderData && <Clock className=\"w-5 h-5 animate-spin text-slate-300\" />}\n                    </h1>\n                    <p className=\"text-slate-500 text-sm font-medium\">Contr√¥le des flux financiers et validations manuelles</p>\n                </div>\n\n                <form onSubmit={handleSearch} className=\"relative\">\n                    <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\n                    <input\n                        type=\"text\"\n                        placeholder=\"R√©f√©rence, client, tel...\"\n                        className=\"pl-11 pr-4 py-3 bg-white border border-slate-200 rounded-2xl w-full md:w-80 focus:outline-none focus:ring-4 focus:ring-indigo-50 transition-all text-sm font-medium shadow-sm\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                    />\n                </form>\n            </div>\n\n            {/* Filters */}\n            <div className=\"flex flex-wrap items-center gap-3 bg-slate-50 p-2 rounded-[2rem] border border-slate-100\">\n                <div className=\"flex gap-1 p-1 bg-white rounded-2xl shadow-sm border border-slate-100\">\n                    {['all', 'pending', 'confirmed', 'rejected'].map((s) => (\n                        <button\n                            key={s}\n                            onClick={() => { setStatusFilter(s); setCurrentPage(1); }}\n                            className={cn(\n                                \"px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all\",\n                                statusFilter === s\n                                    ? \"bg-slate-900 text-white shadow-lg\"\n                                    : \"text-slate-400 hover:text-slate-600 hover:bg-slate-50\"\n                            )}\n                        >\n                            {s === 'all' ? 'TOUS' : s === 'pending' ? 'EN ATTENTE' : s === 'confirmed' ? 'CONFIRM√âS' : 'REJET√âS'}\n                        </button>\n                    ))}\n                </div>\n\n                <div className=\"h-6 w-px bg-slate-200 mx-2 hidden md:block\"></div>\n\n                <div className=\"flex gap-1\">\n                    {['all', 'wave', 'orange', 'mtn', 'manual_transfer'].map((p) => (\n                        <button\n                            key={p}\n                            onClick={() => { setProviderFilter(p); setCurrentPage(1); }}\n                            className={cn(\n                                \"px-3 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border\",\n                                providerFilter === p\n                                    ? \"bg-indigo-50 border-indigo-200 text-indigo-600\"\n                                    : \"bg-white border-slate-100 text-slate-400 hover:bg-slate-50\"\n                            )}\n                        >\n                            {p === 'manual_transfer' ? 'MANUEL' : p.toUpperCase()}\n                        </button>\n                    ))}\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 xl:grid-cols-12 gap-8\">\n                {/* List */}\n                <div className={cn(\"xl:col-span-8 space-y-4\", selectedPayment && \"hidden xl:block\")}>\n                    {isLoading ? (\n                        <div className=\"bg-white p-20 rounded-[2.5rem] border border-slate-100 flex flex-col items-center justify-center space-y-4 text-slate-400 italic font-medium shadow-sm\">\n                            <Clock className=\"w-8 h-8 animate-spin text-indigo-500\" />\n                            <p>Synchronisation des flux financiers...</p>\n                        </div>\n                    ) : payments.length === 0 ? (\n                        <div className=\"bg-white p-20 rounded-[2.5rem] border border-slate-100 flex flex-col items-center justify-center space-y-4 text-slate-400 shadow-sm\">\n                            <AlertTriangle className=\"w-10 h-10 text-slate-200\" />\n                            <div className=\"text-center\">\n                                <p className=\"font-bold text-slate-900 uppercase tracking-widest text-xs\">Aucun paiement trouv√©</p>\n                                <p className=\"text-sm\">Affiniez vos filtres ou effectuez une nouvelle recherche.</p>\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"space-y-4\">\n                            {payments.map((p: Payment) => (\n                                <div\n                                    key={p.id}\n                                    onClick={() => setSelectedPayment(p)}\n                                    className={cn(\n                                        \"bg-white p-6 rounded-[2rem] border-2 transition-all cursor-pointer group flex items-center justify-between relative overflow-hidden\",\n                                        selectedPayment?.id === p.id\n                                            ? \"border-indigo-600 shadow-xl shadow-indigo-100 scale-[1.01]\"\n                                            : p.status === 'pending'\n                                                ? \"border-amber-200 bg-amber-50/10 hover:border-amber-400 hover:shadow-lg shadow-amber-100/20\"\n                                                : \"border-transparent hover:border-slate-300 shadow-sm\"\n                                    )}\n                                >\n                                    {p.status === 'pending' && (\n                                        <div className=\"absolute top-0 right-0 w-2 h-full bg-amber-400 animate-pulse\"></div>\n                                    )}\n\n                                    <div className=\"flex items-center gap-5\">\n                                        <div className={cn(\n                                            \"w-14 h-14 rounded-2xl flex items-center justify-center text-2xl shadow-inner transition-transform group-hover:scale-110 duration-500\",\n                                            p.provider === 'wave' ? 'bg-cyan-50' : p.provider === 'orange' ? 'bg-orange-50' : 'bg-slate-50'\n                                        )}>\n                                            {p.provider === 'wave' ? 'üåä' : p.provider === 'orange' ? 'üçä' : p.provider === 'mtn' ? 'üü°' : 'üîπ'}\n                                        </div>\n                                        <div>\n                                            <div className=\"flex items-center gap-3\">\n                                                <p className=\"font-black text-slate-900 uppercase text-xs tracking-[0.15em]\">{p.reference || p.moneroo_payment_id?.split('-')[1] || 'PENDING'}</p>\n                                                <span className={cn(\"text-[8px] px-2 py-0.5 rounded-full font-black border uppercase tracking-widest\", getTrustColor(p.trust_score))}>\n                                                    Trust: {p.trust_score}%\n                                                </span>\n                                            </div>\n                                            <p className=\"text-base font-bold text-slate-800 mt-0.5\">{p.customer_name}</p>\n                                            <div className=\"flex gap-3 mt-1 text-[10px] items-center\">\n                                                <p className=\"text-indigo-600 font-black uppercase tracking-widest\">{p.payment_method?.replace('_ci', '')}</p>\n                                                <span className=\"w-1 h-1 bg-slate-300 rounded-full\"></span>\n                                                <p className=\"text-slate-400 font-mono\">#{p.order_id.substring(0, 8)}</p>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"text-right flex items-center gap-8\">\n                                        <div>\n                                            <p className=\"text-xl font-black text-slate-900 leading-none\">{(p.amount_expected || p.order_total).toLocaleString()} F</p>\n                                            <p className=\"text-[10px] text-slate-400 uppercase font-black tracking-widest mt-2 flex items-center justify-end gap-1\">\n                                                <Calendar className=\"w-3 h-3\" />\n                                                {new Date(p.created_at).toLocaleDateString()}\n                                            </p>\n                                        </div>\n                                        <div className={cn(\n                                            \"w-3 h-3 rounded-full shadow-sm\",\n                                            p.status === 'confirmed' ? 'bg-green-500' : p.status === 'rejected' ? 'bg-red-500' : 'bg-amber-500 animate-pulse ring-4 ring-amber-100'\n                                        )} />\n                                        <ChevronRight className=\"w-5 h-5 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all\" />\n                                    </div>\n                                </div>\n                            ))}\n\n                            {/* Pagination UI */}\n                            {paginationMeta && paginationMeta.last_page > 1 && (\n                                <div className=\"flex items-center justify-center gap-4 py-8\">\n                                    <button\n                                        disabled={currentPage === 1}\n                                        onClick={() => setCurrentPage((p: number) => Math.max(1, p - 1))}\n                                        className=\"px-6 py-3 rounded-2xl bg-white border border-slate-200 text-slate-900 font-black uppercase text-[10px] tracking-widest disabled:opacity-30 hover:border-indigo-600 transition-all shadow-sm flex items-center gap-2\"\n                                    >\n                                        <ChevronLeft className=\"w-4 h-4\" />\n                                        Pr√©c√©dent\n                                    </button>\n\n                                    <div className=\"flex items-center gap-2 bg-slate-50 p-1.5 rounded-2xl border border-slate-100\">\n                                        {Array.from({ length: Math.min(5, paginationMeta.last_page) }, (_, i) => {\n                                            // Simplified page numbers around current page\n                                            let pageNum = currentPage;\n                                            if (currentPage <= 3) pageNum = i + 1;\n                                            else if (currentPage >= paginationMeta.last_page - 2) pageNum = paginationMeta.last_page - 4 + i;\n                                            else pageNum = currentPage - 2 + i;\n\n                                            if (pageNum <= 0 || pageNum > paginationMeta.last_page) return null;\n\n                                            return (\n                                                <button\n                                                    key={pageNum}\n                                                    onClick={() => setCurrentPage(pageNum)}\n                                                    className={cn(\n                                                        \"w-10 h-10 rounded-xl font-black text-xs transition-all\",\n                                                        currentPage === pageNum\n                                                            ? \"bg-slate-900 text-white shadow-lg\"\n                                                            : \"text-slate-400 hover:text-slate-600 hover:bg-white\"\n                                                    )}\n                                                >\n                                                    {pageNum}\n                                                </button>\n                                            );\n                                        })}\n                                    </div>\n\n                                    <button\n                                        disabled={currentPage === paginationMeta.last_page}\n                                        onClick={() => setCurrentPage((p: number) => Math.min(paginationMeta.last_page, p + 1))}\n                                        className=\"px-6 py-3 rounded-2xl bg-white border border-slate-200 text-slate-900 font-black uppercase text-[10px] tracking-widest disabled:opacity-30 hover:border-indigo-600 transition-all shadow-sm flex items-center gap-2\"\n                                    >\n                                        Suivant\n                                        <ChevronRight className=\"w-4 h-4\" />\n                                    </button>\n                                </div>\n                            )}\n                        </div>\n                    )}\n                </div>\n\n                {/* Details Panel */}\n                <div className={cn(\"xl:col-span-4\", !selectedPayment && \"hidden xl:block\")}>\n                    {selectedPayment ? (\n                        <div className=\"bg-white rounded-[2.5rem] border border-slate-200 shadow-2xl overflow-hidden sticky top-24 animate-in slide-in-from-right-4 duration-500\">\n                            <div className=\"p-8 border-b border-slate-100 flex items-center justify-between bg-white\">\n                                <h3 className=\"font-black text-slate-900 uppercase tracking-tighter text-xl\">D√©tails Transaction</h3>\n                                <button onClick={() => setSelectedPayment(null)} className=\"xl:hidden p-2 hover:bg-slate-50 rounded-full transition-colors\">\n                                    <XCircle className=\"w-6 h-6 text-slate-400 hover:text-red-500 transition-colors\" />\n                                </button>\n                            </div>\n\n                            <div className=\"p-8 space-y-10\">\n                                {/* Score Indicator */}\n                                <div className=\"flex items-center gap-6\">\n                                    <div className={cn(\n                                        \"w-24 h-24 rounded-[2rem] flex flex-col items-center justify-center shadow-xl border-4 border-white\",\n                                        selectedPayment.trust_score >= 80 ? \"bg-green-500 text-white\" : \"bg-amber-500 text-white\"\n                                    )}>\n                                        <p className=\"text-[9px] uppercase font-black opacity-60 tracking-widest\">Score</p>\n                                        <p className=\"text-3xl font-black\">{selectedPayment.trust_score}%</p>\n                                    </div>\n                                    <div className=\"space-y-1.5 min-w-0\">\n                                        <p className=\"text-[10px] font-black uppercase text-slate-400 tracking-[0.2em]\">R√©f√©rence</p>\n                                        <p className=\"text-2xl font-black font-mono text-slate-900 truncate tracking-tight\">{selectedPayment.reference || 'EN ATTENTE'}</p>\n                                        <p className=\"text-xs font-bold text-indigo-600 uppercase tracking-wider bg-indigo-50 px-3 py-1 rounded-lg inline-block\">\n                                            {selectedPayment.provider} Money\n                                        </p>\n                                    </div>\n                                </div>\n\n                                {/* Summary Grid */}\n                                <div className=\"space-y-4\">\n                                    {[\n                                        { label: 'Client', value: selectedPayment.customer_name, icon: User },\n                                        { label: 'Montant', value: `${(selectedPayment.amount_expected || selectedPayment.order_total).toLocaleString()} F`, icon: DollarSign, highlight: true },\n                                        { label: 'Date Envoi', value: new Date(selectedPayment.created_at).toLocaleString(), icon: Calendar },\n                                        { label: 'Order ID', value: selectedPayment.order_id.split('-')[0], icon: Smartphone }\n                                    ].map((item, i) => (\n                                        <div key={i} className=\"flex items-center justify-between p-4 bg-slate-50/50 rounded-2xl border border-slate-100 group/item hover:bg-white hover:border-indigo-100 transition-all\">\n                                            <div className=\"flex items-center gap-3 text-slate-400 group-hover/item:text-indigo-500 transition-colors\">\n                                                <item.icon className=\"w-4 h-4\" />\n                                                <span className=\"text-[10px] font-black uppercase tracking-widest\">{item.label}</span>\n                                            </div>\n                                            <span className={cn(\n                                                \"text-sm font-bold\",\n                                                item.highlight ? \"text-indigo-600 font-black text-lg\" : \"text-slate-900\"\n                                            )}>{item.value}</span>\n                                        </div>\n                                    ))}\n                                </div>\n\n                                {/* Actions */}\n                                {selectedPayment.status === 'pending' && (\n                                    <div className=\"space-y-4 pt-4\">\n                                        <button\n                                            onClick={() => handleAction(selectedPayment.id, 'confirmed')}\n                                            disabled={actionMutation.isPending}\n                                            className=\"w-full bg-slate-900 text-white font-black py-5 rounded-2xl hover:bg-slate-800 transition-all flex items-center justify-center gap-3 uppercase text-xs tracking-[0.2em] shadow-2xl shadow-slate-200 disabled:opacity-50 active:scale-95 group\"\n                                        >\n                                            <CheckCircle className=\"w-5 h-5 group-hover:scale-110 transition-transform\" />\n                                            Confirmer le Paiement\n                                        </button>\n                                        <button\n                                            onClick={() => handleAction(selectedPayment.id, 'rejected')}\n                                            disabled={actionMutation.isPending}\n                                            className=\"w-full bg-white text-red-500 border border-red-50 font-bold py-4 rounded-2xl hover:bg-red-50 transition-all uppercase text-[10px] tracking-widest disabled:opacity-50\"\n                                        >\n                                            Rejeter la transaction\n                                        </button>\n                                    </div>\n                                )}\n\n                                {selectedPayment.status !== 'pending' && (\n                                    <div className={cn(\n                                        \"p-8 rounded-3xl text-center border-2 shadow-sm\",\n                                        selectedPayment.status === 'confirmed'\n                                            ? \"bg-green-50 border-green-100 text-green-700\"\n                                            : \"bg-red-50 border-red-100 text-red-700\"\n                                    )}>\n                                        <div className=\"flex flex-col items-center gap-2\">\n                                            {selectedPayment.status === 'confirmed' ? <CheckCircle className=\"w-8 h-8\" /> : <XCircle className=\"w-8 h-8\" />}\n                                            <div>\n                                                <p className=\"text-[10px] font-black uppercase tracking-[0.2em] opacity-60 mb-1 italic\">Statut Final</p>\n                                                <p className=\"text-xl font-black uppercase tracking-tight\">{selectedPayment.status === 'confirmed' ? 'PAY√â & VALID√â' : 'R√âF√âRENCE REJET√âE'}</p>\n                                            </div>\n                                        </div>\n                                        {selectedPayment.rejection_reason && (\n                                            <div className=\"mt-4 pt-4 border-t border-red-100\">\n                                                <p className=\"text-[10px] font-black uppercase tracking-widest mb-1 opacity-50\">Raison du rejet</p>\n                                                <p className=\"text-xs font-medium italic\">\"{selectedPayment.rejection_reason}\"</p>\n                                            </div>\n                                        )}\n                                    </div>\n                                )}\n\n                                <div className=\"border-t border-slate-100 pt-6\">\n                                    <Link\n                                        href={`/admin/orders/${selectedPayment.order_id}`}\n                                        className=\"flex items-center justify-center gap-3 text-slate-400 hover:text-indigo-600 transition-all py-2 group\"\n                                    >\n                                        <span className=\"uppercase text-[9px] font-black tracking-[0.3em]\">Acc√©der au dossier commande</span>\n                                        <ExternalLink className=\"w-3.5 h-3.5 group-hover:scale-125 transition-transform\" />\n                                    </Link>\n                                </div>\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"h-[600px] bg-slate-50/50 rounded-[3rem] border-4 border-dashed border-slate-100 flex flex-col items-center justify-center p-12 text-center group transition-colors hover:bg-white hover:border-slate-200\">\n                            <div className=\"w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-lg border border-slate-50 mb-8 transition-transform group-hover:rotate-12 duration-500\">\n                                <Smartphone className=\"w-10 h-10 text-slate-200\" />\n                            </div>\n                            <h4 className=\"text-slate-900 font-black uppercase tracking-widest text-xs mb-2\">S√©lection requise</h4>\n                            <p className=\"text-slate-400 text-sm max-w-[200px] font-medium italic\">Cliquez sur un paiement pour examiner les d√©tails et le score de confiance.</p>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}