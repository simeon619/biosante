module.exports=[45573,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(16201),e=a.i(70106);let f=(0,e.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var g=a.i(52495),h=a.i(63519),i=a.i(210),j=a.i(96221),k=a.i(33441),l=a.i(41710);let m=(0,e.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),n=(0,e.default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var o=a.i(63588),p=a.i(50522),q=a.i(86715),r=a.i(38246),s=a.i(97895),t=a.i(30724);function u({params:a}){let{orderId:e}=(0,c.use)(a),[u,v]=(0,c.useState)("pending"),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(!0),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(t.defaultSettings),O=[{id:"wave",label:"Wave",color:"bg-[#1DC1EC]",textColor:"text-[#1DC1EC]",number:(0,t.formatPhoneDisplay)(M.payment.wave)},{id:"orange",label:"Orange",color:"bg-[#FF7900]",textColor:"text-[#FF7900]",number:(0,t.formatPhoneDisplay)(M.payment.orange)},{id:"mtn",label:"MTN",color:"bg-[#FFCC00]",textColor:"text-[#FFCC00]",number:(0,t.formatPhoneDisplay)(M.payment.mtn)},{id:"moov",label:"Moov",color:"bg-[#0066B3]",textColor:"text-[#0066B3]",number:(0,t.formatPhoneDisplay)(M.payment.moov)}];(0,c.useEffect)(()=>{let a=async()=>{try{let a=await q.api.verifyPayment(void 0,e);x(a.order),a.manualStatus&&v(a.manualStatus),z(!1)}catch(a){console.error("Error fetching payment status:",a),z(!1)}};a();let b=setInterval(a,15e3);return()=>clearInterval(b)},[e]),(0,c.useEffect)(()=>{(async()=>{N(await (0,t.getPublicSettings)())})()},[]);let P=async a=>{if(a.preventDefault(),C&&E&&w){H(!0);try{await q.api.submitReference({orderId:e,provider:C,reference:E,amount:w.total}),v("verifying")}catch(a){alert(a.response?.data?.message||"Erreur lors de la soumission")}finally{H(!1)}}},Q=async a=>{if(a.preventDefault(),E&&w){H(!0);try{await q.api.submitReference({orderId:e,provider:"wave",reference:E,amount:w.total}),v("verifying")}catch(a){alert(a.response?.data?.message||"Erreur lors de la soumission")}finally{H(!1)}}},R=async a=>{let b=a.target.files?.[0];if(b){J(!0);try{await q.api.uploadProof(e,b),L(!0),v("verifying")}catch(a){console.error("Upload error:",a),alert("Erreur lors de l'envoi du reçu.")}finally{J(!1)}}};return y?(0,b.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(j.Loader2,{className:"w-8 h-8 text-slate-400 animate-spin mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-sm text-slate-400",children:"Chargement..."})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-slate-50 pb-12",children:[(0,b.jsx)("div",{className:"bg-white border-b border-slate-100",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,b.jsxs)(r.default,{href:"/",className:"flex items-center gap-2 text-slate-500 hover:text-slate-900 transition-colors",children:[(0,b.jsx)(i.ArrowLeft,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Retour"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-[10px] text-slate-400 uppercase font-medium",children:"Commande"}),(0,b.jsxs)("p",{className:"text-sm font-mono font-semibold text-slate-700",children:["#",e.slice(0,8).toUpperCase()]})]})]})}),(0,b.jsxs)("div",{className:"max-w-2xl mx-auto px-4 pt-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-slate-100 mb-4",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400 mb-1",children:"Montant à payer"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-slate-900",children:(0,s.formatCurrency)(w?.total||0)})]}),(0,b.jsx)("div",{className:"bg-white rounded-2xl p-5 border border-slate-100 mb-4",children:(0,b.jsx)("div",{className:"flex items-center justify-between",children:[{id:"pending",label:"Transfert",icon:l.Clock},{id:"verifying",label:"Vérification",icon:m},{id:"success",label:"Validé",icon:d.CheckCircle}].map((a,d,e)=>{let f=e.findIndex(a=>a.id===u),g=d<f||"success"===u,h=a.id===u,i=a.icon;return(0,b.jsxs)(c.default.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:(0,s.cn)("w-10 h-10 rounded-full flex items-center justify-center mb-2 transition-all",g?"bg-green-500 text-white":h?"bg-slate-900 text-white":"bg-slate-100 text-slate-400"),children:g?(0,b.jsx)(k.Check,{className:"w-5 h-5"}):(0,b.jsx)(i,{className:"w-5 h-5"})}),(0,b.jsx)("span",{className:(0,s.cn)("text-xs font-medium",h?"text-slate-900":"text-slate-400"),children:a.label})]}),d<e.length-1&&(0,b.jsx)("div",{className:(0,s.cn)("flex-1 h-0.5 mx-2",d<f?"bg-green-500":"bg-slate-100")})]},a.id)})})}),w?.payment_method==="wave"&&"pending"===u&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-4 mb-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-500 rounded-xl text-white",children:(0,b.jsx)(o.MessageSquare,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-slate-900 mb-1",children:"Lien Wave envoyé par SMS"}),(0,b.jsxs)("p",{className:"text-sm text-slate-600 mb-3",children:["Vérifiez vos SMS pour payer ",(0,s.formatCurrency)(w?.total||0)]}),(0,b.jsxs)("a",{href:`https://pay.wave.com/m/M_ci_m4MFE02NW-Wi/c/ci/?amount=${Math.round(w?.total||0)}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-600 transition-colors",children:[(0,b.jsx)(g.ExternalLink,{className:"w-4 h-4"}),"Ouvrir Wave"]})]})]})}),(0,b.jsxs)("form",{onSubmit:Q,className:"bg-white rounded-2xl p-4 border border-slate-100 mb-4",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-slate-500 block mb-2",children:"ID Transaction Wave (code SMS)"}),(0,b.jsx)("input",{type:"text",value:E,onChange:a=>F(a.target.value),placeholder:"Ex: W123456789",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-mono focus:outline-none focus:border-slate-400 mb-3",required:!0}),(0,b.jsx)("button",{type:"submit",disabled:G||!E,className:"w-full bg-blue-500 text-white py-3 rounded-xl font-medium text-sm hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:G?(0,b.jsx)(j.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:["Valider le paiement Wave ",(0,b.jsx)(p.ChevronRight,{className:"w-4 h-4"})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 mb-4",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400 text-center mb-3",children:"ou envoyez une capture d'écran"}),(0,b.jsxs)("label",{className:"flex items-center justify-center gap-3 p-4 border-2 border-dashed border-blue-200 rounded-xl cursor-pointer hover:bg-blue-50 transition-colors",children:[(0,b.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:R,disabled:I}),I?(0,b.jsx)(j.Loader2,{className:"w-5 h-5 animate-spin text-blue-400"}):K?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.CheckCircle,{className:"w-5 h-5 text-green-500"}),(0,b.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Envoyé !"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n,{className:"w-5 h-5 text-blue-400"}),(0,b.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"Envoyer une capture"})]})]})]})]}),"success"===u&&(0,b.jsxs)("div",{className:"bg-green-50 border border-green-100 rounded-2xl p-6 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(k.Check,{className:"w-8 h-8 text-white"})}),(0,b.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Paiement validé !"}),(0,b.jsx)("p",{className:"text-slate-600 text-sm mb-4",children:"Un agent va vous appeler pour confirmer la livraison."}),(0,b.jsx)(r.default,{href:"/",className:"inline-block bg-slate-900 text-white px-6 py-3 rounded-xl font-medium text-sm hover:bg-slate-800 transition-colors",children:"Retour à l'accueil"})]}),"verifying"===u&&(0,b.jsxs)("div",{className:"bg-white border border-slate-100 rounded-2xl p-8 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Vérification en cours"}),(0,b.jsx)("p",{className:"text-slate-500 text-sm",children:"Nous vérifions votre transfert. Cette page s'actualise automatiquement."})]}),"pending"===u&&w?.payment_method!=="wave"&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 mb-4",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-slate-500 block mb-3",children:"Sélectionnez votre opérateur"}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-2",children:O.filter(a=>"wave"!==a.id).map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>D(a.id),className:(0,s.cn)("flex flex-col items-center p-3 rounded-xl border transition-all",C===a.id?"bg-slate-900 border-slate-900 text-white":"bg-slate-50 border-slate-100 text-slate-700 hover:border-slate-200"),children:[(0,b.jsx)("img",{src:`/logos/${a.id}.png`,alt:a.label,className:"w-8 h-8 rounded-full object-contain mb-1.5",onError:a=>{let b=a.target;b.style.display="none",b.nextElementSibling?.classList.remove("hidden")}}),(0,b.jsx)("div",{className:(0,s.cn)("w-8 h-8 rounded-full flex items-center justify-center mb-1.5 text-white font-bold text-xs hidden",a.color),children:"orange"===a.id?"OM":"mtn"===a.id?"M":"Mo"}),(0,b.jsx)("span",{className:"text-[10px] font-semibold uppercase",children:a.label})]},a.id))}),C&&(0,b.jsxs)("div",{className:"mt-4 p-4 bg-green-50 rounded-xl border border-green-200",children:[(0,b.jsxs)("p",{className:"text-xs font-medium text-green-700 mb-2 flex items-center gap-1",children:[(0,b.jsx)(k.Check,{className:"w-3 h-3"}),"Transférer à ce numéro ",O.find(a=>a.id===C)?.label]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xl font-mono font-bold text-green-800",children:O.find(a=>a.id===C)?.number}),(0,b.jsx)("button",{onClick:()=>{var a;let b=O.find(a=>a.id===C)?.number;b&&(a=b.replace(/\s/g,""),navigator.clipboard.writeText(a),B("provider-num"),setTimeout(()=>B(null),2e3))},className:"p-2 bg-green-200 rounded-lg hover:bg-green-300 transition-colors",children:"provider-num"===A?(0,b.jsx)(k.Check,{className:"w-4 h-4 text-green-700"}):(0,b.jsx)(f,{className:"w-4 h-4 text-green-600"})})]})]})]}),(0,b.jsxs)("form",{onSubmit:P,className:"bg-white rounded-2xl p-4 border border-slate-100 mb-4",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-slate-500 block mb-2",children:"ID Transaction (code SMS)"}),(0,b.jsx)("input",{type:"text",value:E,onChange:a=>F(a.target.value),placeholder:"Ex: 1234567890",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-mono focus:outline-none focus:border-slate-400 mb-3",required:!0}),(0,b.jsx)("button",{type:"submit",disabled:G||!E||!C,className:"w-full bg-slate-900 text-white py-3 rounded-xl font-medium text-sm hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:G?(0,b.jsx)(j.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:["Valider le paiement ",(0,b.jsx)(p.ChevronRight,{className:"w-4 h-4"})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 mb-4",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400 text-center mb-3",children:"ou envoyez une capture d'écran"}),(0,b.jsxs)("label",{className:"flex items-center justify-center gap-3 p-4 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,b.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:R,disabled:I}),I?(0,b.jsx)(j.Loader2,{className:"w-5 h-5 animate-spin text-slate-400"}):K?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.CheckCircle,{className:"w-5 h-5 text-green-500"}),(0,b.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Envoyé !"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n,{className:"w-5 h-5 text-slate-400"}),(0,b.jsx)("span",{className:"text-sm font-medium text-slate-600",children:"Envoyer une capture"})]})]})]})]}),(0,b.jsx)("div",{className:"bg-white rounded-2xl p-4 border border-slate-100",children:(0,b.jsxs)("a",{href:`https://wa.me/${M.contact_whatsapp.replace(/\+/g,"")}`,target:"_blank",className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:(0,b.jsx)(h.Phone,{className:"w-5 h-5 text-white"})}),(0,b.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Besoin d'aide ?"})]}),(0,b.jsx)(g.ExternalLink,{className:"w-4 h-4 text-slate-400"})]})})]})]})}a.s(["default",()=>u],45573)}];

//# sourceMappingURL=app_%28store%29_payment_%5BorderId%5D_page_tsx_7f37e47f._.js.map