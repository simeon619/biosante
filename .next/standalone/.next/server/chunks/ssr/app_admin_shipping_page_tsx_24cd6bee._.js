module.exports=[19492,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(10227),e=a.i(15618),f=a.i(81560),g=a.i(24569),h=a.i(62722),i=a.i(96221),j=a.i(87532);let k=(0,a.i(70106).default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var l=a.i(67900),m=a.i(63519),n=a.i(24987),o=a.i(33508),p=a.i(97063),q=a.i(14548),r=a.i(33217),s=a.i(70025),t=a.i(37927),u=a.i(97895);function v(){let a=(0,t.useQueryClient)(),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)({slug:"",name:"",type:"National",contact:"",hub_principal:"",regions_desservies:[],destinations:[],is_active:!0}),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),{data:J=[],isLoading:K}=(0,r.useQuery)({queryKey:["admin","shipping"],queryFn:async()=>{let a=localStorage.getItem("admin_token"),b=await fetch(`${u.API_URL}/api/admin/shipping`,{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)throw Error("Failed to fetch shipping data");return(await b.json()).companies||[]}}),L=(0,s.useMutation)({mutationFn:async a=>{let b=localStorage.getItem("admin_token"),c=await fetch(`${u.API_URL}/api/admin/shipping`,{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!c.ok)throw Error("Failed to add company");return c.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["admin","shipping"]}),w(!1),E({slug:"",name:"",type:"National",contact:"",hub_principal:"",regions_desservies:[],destinations:[],is_active:!0})}}),M=(0,s.useMutation)({mutationFn:async a=>{let b=localStorage.getItem("admin_token"),c=await fetch(`${u.API_URL}/api/admin/shipping/${a.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!c.ok)throw Error("Failed to update company");return c.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["admin","shipping"]}),y(!1),A(null)}}),N=(0,s.useMutation)({mutationFn:async a=>{let b=localStorage.getItem("admin_token"),c=await fetch(`${u.API_URL}/api/admin/shipping/${a}/toggle`,{method:"PATCH",headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to toggle status");return c.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["admin","shipping"]})}}),O=(0,s.useMutation)({mutationFn:async a=>{let b=localStorage.getItem("admin_token"),c=await fetch(`${u.API_URL}/api/admin/shipping/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to delete company");return c.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["admin","shipping"]})}}),P=async a=>{a.preventDefault(),z?M.mutate({...D,id:z.id}):L.mutate(D)},Q=J.filter(a=>a.name.toLowerCase().includes(B.toLowerCase())||a.type.toLowerCase().includes(B.toLowerCase()));return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Expédition"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Gérez vos compagnies et zones de livraison"})]}),(0,b.jsxs)("button",{onClick:()=>{A(null),E({slug:"",name:"",type:"National",contact:"",hub_principal:"",regions_desservies:[],destinations:[],is_active:!0}),w(!0)},className:"flex items-center justify-center gap-2 bg-black text-white px-6 py-2.5 rounded-xl font-bold hover:bg-gray-800 transition-all shadow-lg shadow-black/10",children:[(0,b.jsx)(e.Plus,{className:"w-5 h-5"}),"Ajouter une compagnie"]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:B,onChange:a=>C(a.target.value),placeholder:"Rechercher une compagnie...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-black focus:border-transparent outline-none bg-white"}),(0,b.jsx)(j.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),K?(0,b.jsx)("div",{className:"flex flex-center justify-center h-64",children:(0,b.jsx)(i.Loader2,{className:"w-12 h-12 animate-spin text-black"})}):0===Q.length?(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-12 text-center border border-gray-100",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(d.Truck,{className:"w-8 h-8 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Aucune compagnie"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Commencez par ajouter votre premier partenaire de livraison."})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Q.map(a=>(0,b.jsx)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden flex flex-col",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-black text-white rounded-xl flex items-center justify-center",children:(0,b.jsx)(d.Truck,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void N.mutate(b)},className:`p-2 rounded-lg transition-colors ${a.is_active?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-50"}`,title:a.is_active?"Désactiver":"Activer",children:(0,b.jsx)(h.XCircle,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>{A(a),E({slug:a.slug||"",name:a.name,type:a.type,contact:a.contact,hub_principal:a.hub_principal,regions_desservies:a.regions_desservies||[],destinations:a.destinations||[],is_active:a.is_active}),y(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Modifier",children:(0,b.jsx)(g.Edit,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void(confirm("Êtes-vous sûr de vouloir supprimer cette compagnie ?")&&O.mutate(b))},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:(0,b.jsx)(f.Trash2,{className:"w-5 h-5"})})]})]}),(0,b.jsxs)("div",{className:"space-y-1 mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,b.jsx)(k,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:a.type})]})]}),(0,b.jsxs)("div",{className:"space-y-3 pt-4 border-t border-gray-50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gray-50 rounded-lg flex items-center justify-center flex-shrink-0 text-gray-400",children:(0,b.jsx)(l.Building2,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-400 text-[10px] uppercase font-bold",children:"Hub Principal"}),(0,b.jsx)("p",{className:"text-gray-900 font-medium",children:a.hub_principal})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gray-50 rounded-lg flex items-center justify-center flex-shrink-0 text-gray-400",children:(0,b.jsx)(m.Phone,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-400 text-[10px] uppercase font-bold",children:"Contact"}),(0,b.jsx)("p",{className:"text-gray-900 font-medium",children:a.contact})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3 text-sm",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gray-50 rounded-lg flex items-center justify-center flex-shrink-0 text-gray-400",children:(0,b.jsx)(n.MapPin,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-400 text-[10px] uppercase font-bold",children:"Régions"}),(0,b.jsx)("p",{className:"text-gray-900 font-medium line-clamp-1",children:a.regions_desservies?.join(", ")||"Aucune"})]})]})]})]})},a.id))}),(v||x)&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm overflow-y-auto",children:(0,b.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-2xl my-8 overflow-hidden shadow-2xl animate-in fade-in zoom-in duration-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:z?"Modifier la compagnie":"Ajouter une compagnie"}),(0,b.jsx)("button",{onClick:()=>{w(!1),y(!1)},className:"p-2 hover:bg-gray-50 rounded-xl transition-colors",children:(0,b.jsx)(o.X,{className:"w-6 h-6"})})]}),(0,b.jsxs)("form",{onSubmit:P,className:"p-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1.5 uppercase tracking-wider",children:"Nom de la compagnie"}),(0,b.jsx)("input",{type:"text",value:D.name,onChange:a=>E({...D,name:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-black outline-none transition-all",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1.5 uppercase tracking-wider",children:"Slug (optionnel)"}),(0,b.jsx)("input",{type:"text",value:D.slug,onChange:a=>E({...D,slug:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-black outline-none transition-all",placeholder:"ex: dhl-express"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1.5 uppercase tracking-wider",children:"Type de réseau"}),(0,b.jsxs)("select",{value:D.type,onChange:a=>E({...D,type:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-black outline-none transition-all bg-white",children:[(0,b.jsx)("option",{value:"National",children:"National"}),(0,b.jsx)("option",{value:"International",children:"International"}),(0,b.jsx)("option",{value:"Local",children:"Local (Ville)"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1.5 uppercase tracking-wider",children:"Hub Principal"}),(0,b.jsx)("input",{type:"text",value:D.hub_principal,onChange:a=>E({...D,hub_principal:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-black outline-none transition-all",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1.5 uppercase tracking-wider",children:"Contact"}),(0,b.jsx)("input",{type:"text",value:D.contact,onChange:a=>E({...D,contact:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-black outline-none transition-all",required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1.5 uppercase tracking-wider",children:"Régions desservies"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,b.jsx)("input",{type:"text",value:F,onChange:a=>G(a.target.value),onKeyPress:a=>"Enter"===a.key&&(a.preventDefault(),F&&E({...D,regions_desservies:[...D.regions_desservies,F]}),G("")),className:"flex-1 px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-black outline-none text-sm",placeholder:"Ajouter une région..."}),(0,b.jsx)("button",{type:"button",onClick:()=>{F&&(E({...D,regions_desservies:[...D.regions_desservies,F]}),G(""))},className:"p-2 bg-black text-white rounded-xl",children:(0,b.jsx)(e.Plus,{className:"w-5 h-5"})})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:D.regions_desservies.map((a,c)=>(0,b.jsxs)("span",{className:"flex items-center gap-1.5 bg-gray-50 text-gray-600 px-3 py-1 rounded-lg text-xs font-bold border border-gray-100",children:[a,(0,b.jsx)("button",{type:"button",onClick:()=>E({...D,regions_desservies:D.regions_desservies.filter((a,b)=>b!==c)}),children:(0,b.jsx)(o.X,{className:"w-3 h-3 hover:text-red-500"})})]},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1.5 uppercase tracking-wider",children:"Destinations spécifiques"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,b.jsx)("input",{type:"text",value:H,onChange:a=>I(a.target.value),onKeyPress:a=>"Enter"===a.key&&(a.preventDefault(),H&&E({...D,destinations:[...D.destinations,H]}),I("")),className:"flex-1 px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-black outline-none text-sm",placeholder:"Ajouter une destination..."}),(0,b.jsx)("button",{type:"button",onClick:()=>{H&&(E({...D,destinations:[...D.destinations,H]}),I(""))},className:"p-2 bg-black text-white rounded-xl",children:(0,b.jsx)(e.Plus,{className:"w-5 h-5"})})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:D.destinations.map((a,c)=>(0,b.jsxs)("span",{className:"flex items-center gap-1.5 bg-blue-50 text-blue-600 px-3 py-1 rounded-lg text-xs font-bold border border-blue-100",children:[(0,b.jsx)(n.MapPin,{className:"w-3 h-3"}),a,(0,b.jsx)("button",{type:"button",onClick:()=>E({...D,destinations:D.destinations.filter((a,b)=>b!==c)}),children:(0,b.jsx)(o.X,{className:"w-3 h-3 hover:text-red-500"})})]},c))})]}),(0,b.jsxs)("div",{className:"pt-4 border-t border-gray-50",children:[(0,b.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer group",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"checkbox",checked:D.is_active,onChange:a=>E({...D,is_active:a.target.checked}),className:"sr-only"}),(0,b.jsx)("div",{className:`w-12 h-6 rounded-full transition-colors ${D.is_active?"bg-black":"bg-gray-200"}`}),(0,b.jsx)("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${D.is_active?"left-7":"left-1"}`})]}),(0,b.jsx)("span",{className:"text-sm font-bold text-gray-700 uppercase tracking-widest",children:"Compagnie Active"})]}),(0,b.jsxs)("div",{className:"mt-4 p-4 bg-blue-50/50 rounded-2xl border border-blue-100 flex gap-3",children:[(0,b.jsx)(p.Info,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),(0,b.jsx)("p",{className:"text-[11px] text-blue-700 leading-relaxed",children:"Une compagnie active sera visible pour les clients lors de la sélection du mode de livraison à la commande."})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-4 mt-10 pt-6 border-t border-gray-100",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{w(!1),y(!1)},className:"px-6 py-2.5 text-sm font-black text-gray-500 uppercase tracking-widest hover:text-black transition-colors",children:"Annuler"}),(0,b.jsxs)("button",{type:"submit",disabled:L.isPending||M.isPending,className:"flex items-center gap-2 bg-black text-white px-10 py-3 rounded-2xl font-black uppercase tracking-widest hover:bg-gray-800 transition-all shadow-xl shadow-black/10 disabled:opacity-50",children:[L.isPending||M.isPending?(0,b.jsx)(i.Loader2,{className:"w-5 h-5 animate-spin"}):(0,b.jsx)(q.Save,{className:"w-5 h-5"}),z?"Enregistrer":"Ajouter"]})]})]})]})})]})}a.s(["default",()=>v],19492)}];

//# sourceMappingURL=app_admin_shipping_page_tsx_24cd6bee._.js.map