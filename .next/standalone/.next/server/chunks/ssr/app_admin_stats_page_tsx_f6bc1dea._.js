module.exports=[10390,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(39761),e=a.i(24669);let f=(0,a.i(70106).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var g=a.i(38784),h=a.i(90166),i=a.i(83497),j=a.i(41675),k=a.i(5784),l=a.i(32860),m=a.i(41710),n=a.i(67453),o=a.i(62722),p=a.i(90669),q=a.i(33217),r=a.i(97895);let s=[{label:"Aujourd'hui",days:0},{label:"Hier",days:1},{label:"7 derniers jours",days:7},{label:"30 derniers jours",days:30},{label:"90 derniers jours",days:90},{label:"Cette année",days:365}];function t(){let[a,t]=(0,c.useState)(()=>{let a=new Date;return a.setDate(a.getDate()-30),a}),[u,v]=(0,c.useState)(new Date),[w,x]=(0,c.useState)(!1),y=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=a=>{y.current&&!y.current.contains(a.target)&&x(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let{data:z,isLoading:A,error:B,refetch:C}=(0,q.useQuery)({queryKey:["admin","stats",a.toISOString(),u.toISOString()],queryFn:async()=>{let b=localStorage.getItem("admin_token"),c=`${r.API_URL}/api/admin/stats?start=${a.toISOString()}&end=${u.toISOString()}`,d=await fetch(c,{headers:{Authorization:`Bearer ${b}`}});if(!d.ok)throw Error((await d.json()).error||"Failed to fetch stats");return d.json()}}),D=a=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(a);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Analyses & Statistiques"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"Suivez les performances de votre boutique en temps réel"})]}),(0,b.jsxs)("div",{className:"relative",ref:y,children:[(0,b.jsxs)("button",{onClick:()=>x(!w),className:"flex items-center gap-3 bg-white border border-gray-200 px-4 py-2.5 rounded-xl font-bold hover:bg-gray-50 transition-all text-sm shadow-sm",children:[(0,b.jsx)(j.Calendar,{className:"w-4 h-4 text-gray-400"}),(0,b.jsxs)("span",{children:[a.toLocaleDateString("fr-FR")," - ",u.toLocaleDateString("fr-FR")]}),(0,b.jsx)(k.ChevronDown,{className:`w-4 h-4 text-gray-400 transition-transform ${w?"rotate-180":""}`})]}),w&&(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white border border-gray-100 rounded-2xl shadow-xl z-50 p-2 animate-in fade-in slide-in-from-top-2",children:[(0,b.jsx)("div",{className:"grid grid-cols-1 gap-1",children:s.map(a=>(0,b.jsx)("button",{onClick:()=>{var b;let c,d;return b=a.days,c=new Date,d=new Date,void(0===b?d.setHours(0,0,0,0):1===b?(d.setDate(d.getDate()-1),d.setHours(0,0,0,0),c.setDate(c.getDate()-1),c.setHours(23,59,59,999)):d.setDate(d.getDate()-b),t(d),v(c),x(!1))},className:"text-left px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-black rounded-lg transition-colors",children:a.label},a.label))}),(0,b.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-50",children:[(0,b.jsx)("p",{className:"px-4 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Période personnalisée"}),(0,b.jsxs)("div",{className:"p-2 space-y-2",children:[(0,b.jsx)("input",{type:"date",value:a.toISOString().split("T")[0],onChange:a=>t(new Date(a.target.value)),className:"w-full text-xs border border-gray-100 rounded-lg p-2 outline-none focus:ring-1 focus:ring-black"}),(0,b.jsx)("input",{type:"date",value:u.toISOString().split("T")[0],onChange:a=>v(new Date(a.target.value)),className:"w-full text-xs border border-gray-100 rounded-lg p-2 outline-none focus:ring-1 focus:ring-black"})]})]})]})]})]}),B&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-100 text-red-600 p-4 rounded-2xl flex items-center gap-3",children:[(0,b.jsx)(o.XCircle,{className:"w-5 h-5"}),(0,b.jsx)("p",{className:"font-medium",children:B.message||"Erreur lors du chargement"}),(0,b.jsx)("button",{onClick:()=>C(),className:"ml-auto text-sm font-bold underline",children:"Réessayer"})]}),A?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(a=>(0,b.jsx)("div",{className:"h-32 bg-white rounded-2xl border border-gray-100 animate-pulse"},a))}):z&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm relative overflow-hidden group",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-110 transition-transform",children:(0,b.jsx)(h.DollarSign,{className:"w-16 h-16 text-black"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-gray-500 text-xs font-bold uppercase tracking-wider mb-3",children:[(0,b.jsx)(p.Activity,{className:"w-4 h-4"}),"Revenu Total"]}),(0,b.jsx)("div",{className:"flex items-end justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-black text-gray-900",children:D(z.revenue.total)}),(0,b.jsxs)("div",{className:`flex items-center gap-1 mt-1 text-xs font-bold ${z.revenue.trend>=0?"text-green-600":"text-red-600"}`,children:[z.revenue.trend>=0?(0,b.jsx)(e.TrendingUp,{className:"w-3 h-3"}):(0,b.jsx)(f,{className:"w-3 h-3"}),Math.abs(z.revenue.trend),"% vs période préc."]})]})})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm relative overflow-hidden group",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-110 transition-transform",children:(0,b.jsx)(g.ShoppingCart,{className:"w-16 h-16 text-black"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-gray-500 text-xs font-bold uppercase tracking-wider mb-3",children:[(0,b.jsx)(i.Package,{className:"w-4 h-4"}),"Commandes"]}),(0,b.jsxs)("div",{className:"flex items-end justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-black text-gray-900",children:z.orders.total}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-1 font-medium",children:[z.orders.completed," terminées"]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-xs font-bold text-gray-900",children:"Moy. Panier"}),(0,b.jsx)("p",{className:"text-sm font-bold text-gray-500",children:D(z.revenue.average)})]})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm relative overflow-hidden group",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-110 transition-transform",children:(0,b.jsx)(d.BarChart3,{className:"w-16 h-16 text-black"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-gray-500 text-xs font-bold uppercase tracking-wider mb-3",children:[(0,b.jsx)(m.Clock,{className:"w-4 h-4"}),"En attente"]}),(0,b.jsx)("div",{className:"flex items-end justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-black text-gray-900",children:z.orders.pending}),(0,b.jsx)("p",{className:"text-xs text-orange-500 mt-1 font-bold italic",children:"À traiter d'urgence"})]})})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm relative overflow-hidden group",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-110 transition-transform",children:(0,b.jsx)(n.CheckCircle2,{className:"w-16 h-16 text-black"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-gray-500 text-xs font-bold uppercase tracking-wider mb-3",children:[(0,b.jsx)(e.TrendingUp,{className:"w-4 h-4"}),"Taux conversion"]}),(0,b.jsx)("div",{className:"flex items-end justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-2xl font-black text-gray-900",children:[z.orders.total>0?(z.orders.completed/z.orders.total*100).toFixed(1):0,"%"]}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1 font-medium",children:"Commandes livrées"})]})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-3xl border border-gray-100 shadow-xl overflow-hidden relative",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-black text-gray-900",children:"Évolution du Chiffre d'Affaires"}),(0,b.jsx)("p",{className:"text-xs text-gray-400 font-medium",children:"Performances journalières sur la période"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-black rounded-full"}),(0,b.jsx)("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Revenu"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-gray-200 rounded-full"}),(0,b.jsx)("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Commandes"})]})]})]}),(0,b.jsx)("div",{className:"h-64 relative flex items-end justify-between gap-1 mt-4",children:z.dailyData.map((a,c)=>{let d=Math.max(...z.dailyData.map(a=>a.revenue))||1,e=a.revenue/d*100;return(0,b.jsxs)("div",{className:"flex-1 group relative flex flex-col items-center justify-end h-full",children:[(0,b.jsx)("div",{className:"w-full bg-gray-50 group-hover:bg-black group-hover:scale-x-110 transition-all rounded-t-lg relative",style:{height:`${e}%`},children:(0,b.jsx)("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-black text-white px-2 py-1 rounded text-[10px] opacity-0 group-hover:opacity-100 transition-opacity z-10 whitespace-nowrap font-bold",children:D(a.revenue)})}),(0,b.jsx)("div",{className:"mt-2 text-[8px] font-black text-gray-400 uppercase rotate-45 md:rotate-0 origin-center truncate w-full text-center",children:new Date(a.date).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})})]},c)})})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-3xl border border-gray-100 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h3",{className:"text-lg font-black text-gray-900",children:"Top Produits"}),(0,b.jsx)("div",{className:"w-8 h-8 bg-gray-50 rounded-lg flex items-center justify-center",children:(0,b.jsx)(e.TrendingUp,{className:"w-4 h-4 text-black"})})]}),(0,b.jsx)("div",{className:"space-y-4",children:z.topProducts.map((a,c)=>(0,b.jsxs)("div",{className:"group p-4 rounded-2xl hover:bg-gray-50 transition-colors border border-transparent hover:border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:"font-bold text-gray-900 text-sm truncate max-w-[150px]",children:a.name}),(0,b.jsx)("p",{className:"text-xs font-black text-black",children:D(a.revenue)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-1.5",children:(0,b.jsxs)("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[a.quantity," ventes"]})}),(0,b.jsx)("div",{className:"w-24 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-black rounded-full",style:{width:`${a.revenue/(z.topProducts[0]?.revenue||1)*100}%`}})})]})]},c))})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-gray-50 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-black text-gray-900",children:"Dernières Commandes"}),(0,b.jsx)("p",{className:"text-xs text-gray-400 font-medium",children:"Les transactions les plus récentes"})]}),(0,b.jsxs)("button",{className:"flex items-center gap-2 text-xs font-bold text-black hover:underline uppercase tracking-widest",children:["Voir Tout ",(0,b.jsx)(l.ArrowRight,{className:"w-3 h-3"})]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left",children:[(0,b.jsx)("thead",{className:"bg-gray-50/50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"ID Commande"}),(0,b.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Client"}),(0,b.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Montant"}),(0,b.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Statut"}),(0,b.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Date"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-50",children:z.recentOrders.map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[(0,b.jsxs)("td",{className:"px-6 py-4 text-xs font-bold text-gray-900",children:["#",a.id.slice(-8)]}),(0,b.jsx)("td",{className:"px-6 py-4 text-xs font-medium text-gray-600",children:a.customer}),(0,b.jsx)("td",{className:"px-6 py-4 text-xs font-black text-gray-900",children:D(a.total)}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold uppercase ${"completed"===a.status?"bg-green-50 text-green-600":"pending"===a.status?"bg-orange-50 text-orange-600":"bg-gray-50 text-gray-600"}`,children:"completed"===a.status?"Livré":"En attente"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-[10px] font-bold text-gray-400",children:new Date(a.date).toLocaleDateString("fr-FR")})]},c))})]})})]})]})]})}a.s(["default",()=>t],10390)}];

//# sourceMappingURL=app_admin_stats_page_tsx_f6bc1dea._.js.map