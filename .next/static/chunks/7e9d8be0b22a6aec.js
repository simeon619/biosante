(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},12426,e=>{"use strict";let t=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},23261,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(1928),a=e.i(12426),l=e.i(88844),d=e.i(25652),n=e.i(3116);function c(){let[e,c]=(0,s.useState)(null),[o,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=localStorage.getItem("admin_token"),t=await fetch("http://localhost:3333/api/admin/dashboard",{headers:{Authorization:`Bearer ${e}`,"X-Admin-Id":JSON.parse(localStorage.getItem("admin_data")||"{}").id}}),s=await t.json();c(s)}catch(e){console.error("Failed to fetch dashboard:",e)}finally{i(!1)}};if(o)return(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-black"})});let m=[{label:"Commandes Aujourd'hui",value:e?.orders.today||0,icon:r.ShoppingCart,color:"bg-blue-500"},{label:"En Attente",value:e?.orders.pending||0,icon:n.Clock,color:"bg-orange-500"},{label:"Revenus Aujourd'hui",value:`${(e?.revenue.today||0).toLocaleString()} F`,icon:a.DollarSign,color:"bg-green-500"},{label:"Revenus Total",value:`${(e?.revenue.total||0).toLocaleString()} F`,icon:d.TrendingUp,color:"bg-purple-500"}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de Bord"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Vue d'ensemble de votre activité"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:m.map((e,s)=>{let r=e.icon;return(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:`${e.color} p-3 rounded-xl`,children:(0,t.jsx)(r,{className:"w-6 h-6 text-white"})})}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.label})]},s)})}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-100",children:(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Commandes Récentes"})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"ID"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Client"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Total"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Statut"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Date"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:e?.recentOrders?.length?e.recentOrders.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:[e.id.substring(0,8),"..."]}),(0,t.jsxs)("td",{className:"px-6 py-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.customer_name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.customer_phone})]}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm font-semibold text-gray-900",children:[e.total?.toLocaleString()," F"]}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"completed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:e.status}),null!==e.trust_score&&void 0!==e.trust_score&&(0,t.jsxs)("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded border ${e.trust_score>=80?"bg-green-50 text-green-600 border-green-200":e.trust_score>=50?"bg-orange-50 text-orange-600 border-orange-200":"bg-red-50 text-red-600 border-red-200"}`,children:["Confiance: ",e.trust_score,"%"]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("fr-FR")})]},e.id)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:"Aucune commande récente"})})})]})})]}),(e?.notifications?.dlqCount??0)>0&&e&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"bg-red-500 p-2 rounded-lg",children:(0,t.jsx)(l.Package,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-semibold text-red-800",children:[e.notifications.dlqCount," notification(s) en échec"]}),(0,t.jsx)("p",{className:"text-sm text-red-600",children:"Consultez la file d'attente des erreurs pour résoudre les problèmes."})]})]})]})}e.s(["default",()=>c])}]);