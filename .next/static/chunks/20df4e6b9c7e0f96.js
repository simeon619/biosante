(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let a=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},7233,e=>{"use strict";let a=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},71689,e=>{"use strict";let a=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],71689)},52571,e=>{"use strict";let a=(0,e.i(75254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["Info",()=>a],52571)},56909,e=>{"use strict";let a=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},12426,e=>{"use strict";let a=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>a],12426)},95468,e=>{"use strict";let a=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],95468)},93609,e=>{"use strict";var a=e.i(43476),s=e.i(71645),l=e.i(18566),t=e.i(56909),r=e.i(71689),i=e.i(31278),o=e.i(75254);let n=(0,o.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var d=e.i(27612),c=e.i(7233);let u=(0,o.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var x=e.i(52571),g=e.i(12426),h=e.i(88844),p=e.i(95468);let m=(0,o.default)("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);function b({productId:e,isNew:o}){let b=(0,l.useRouter)(),[y,f]=(0,s.useState)(!o),[j,v]=(0,s.useState)(!1),[N,w]=(0,s.useState)("general"),[k,P]=(0,s.useState)({id:"",name:"",price:0,stock:0,description:"",is_active:!0,image:"",ingredients_image:"",infographic_image:"",gallery:[],tagline:"",category:"",benefits:""}),[C,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{!o&&e&&M()},[e,o]);let M=async()=>{try{let a=await fetch(`http://localhost:3333/api/admin/products/${e}`,{cache:"no-store"}),s=await a.json();if(console.log("[ProductEditor] Fetched product data:",s.product),s.product){let e=s.product;P({...e,benefits:Array.isArray(e.benefits)?e.benefits.join(", "):e.benefits||"",gallery:Array.isArray(e.gallery)?e.gallery:[]})}}catch(e){console.error("Failed to fetch product:",e)}finally{f(!1)}},E=async(e,a)=>{let s=e.target.files?.[0];if(!s)return void console.log("[ProductEditor] No file selected");console.log(`[ProductEditor] Uploading file to slot: ${a}, file: ${s.name}, size: ${s.size}`),S(a);let l=new FormData;l.append("image",s);try{let e=await fetch("http://localhost:3333/api/admin/uploads/image",{method:"POST",body:l});if(console.log(`[ProductEditor] Upload response status: ${e.status}`),e.ok){let s=await e.json();console.log(`[ProductEditor] Upload successful, URL: ${s.url}`),"gallery"===a?P(e=>({...e,gallery:[...e.gallery,s.url]})):P(e=>({...e,[a]:s.url}))}else{let a=await e.json();console.error("[ProductEditor] Upload failed:",a),alert(`Erreur d'upload: ${a.error||"Erreur inconnue"}`)}}catch(e){console.error("[ProductEditor] Upload error:",e),alert("Échec de la connexion au serveur pour l'upload.")}finally{S(null)}},q=async a=>{a.preventDefault(),v(!0);try{let a=o?"http://localhost:3333/api/admin/products":`http://localhost:3333/api/admin/products/${e}`,s={...k,benefits:k.benefits.split(",").map(e=>e.trim()).filter(e=>""!==e)};console.log("[ProductEditor] Sending payload:",s);let l=await fetch(a,{method:o?"POST":"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(l.ok)console.log("[ProductEditor] Save successful"),alert("Produit enregistré avec succès !"),b.push("/admin/products"),b.refresh();else{let e=await l.json();alert(e.error||"Erreur lors de la sauvegarde")}}catch(e){console.error("Save error:",e),alert("Erreur réseau lors de la sauvegarde")}finally{v(!1)}};if(y)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsx)(i.Loader2,{className:"w-12 h-12 animate-spin text-black"})});let I=[{id:"general",label:"Infos Générales",icon:x.Info},{id:"media",label:"Photos & Médias",icon:u},{id:"pricing",label:"Prix & Stock",icon:g.DollarSign},{id:"content",label:"Contraires & Bienfaits",icon:m}],T=({slot:e,label:s,sublabel:l,value:t})=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-gray-900",children:s}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:l})]}),t&&(0,a.jsx)("button",{type:"button",onClick:()=>P(a=>({...a,[e]:""})),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors",children:(0,a.jsx)(d.Trash2,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:`relative aspect-video rounded-xl border-2 border-dashed transition-all flex items-center justify-center overflow-hidden bg-gray-50 ${t?"border-transparent":"border-gray-200"}`,children:t?(0,a.jsx)("img",{src:t,alt:s,className:"w-full h-full object-contain"}):(0,a.jsxs)("label",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer hover:bg-gray-100 transition-colors",children:[C===e?(0,a.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin text-gray-400"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n,{className:"w-8 h-8 text-gray-400 mb-2"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Cliquez pour uploader"})]}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:a=>E(a,e),disabled:!!C})]})})]});return(0,a.jsxs)("form",{onSubmit:q,className:"max-w-5xl mx-auto space-y-8 pb-20",children:[(0,a.jsxs)("div",{className:"sticky top-0 z-30 flex items-center justify-between bg-gray-50/80 backdrop-blur-md py-4 border-b border-gray-100 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>b.back(),className:"p-2 hover:bg-white rounded-xl transition-all shadow-sm border border-gray-100",children:(0,a.jsx)(r.ArrowLeft,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:o?"Nouveau Produit":`Modifier ${k.name}`}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Haut du catalogue • ",k.id||"slug-automatique"]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("button",{type:"submit",disabled:j,className:"flex items-center gap-2 bg-black text-white px-6 py-2.5 rounded-xl font-bold hover:bg-gray-800 transition-all shadow-lg shadow-black/10 disabled:opacity-50",children:[j?(0,a.jsx)(i.Loader2,{className:"w-5 h-5 animate-spin"}):(0,a.jsx)(t.Save,{className:"w-5 h-5"}),o?"Créer le produit":"Enregistrer les modifications"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,a.jsx)("div",{className:"md:col-span-1 space-y-2",children:I.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>w(e.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all ${N===e.id?"bg-black text-white shadow-lg shadow-black/10 scale-[1.02]":"text-gray-500 hover:bg-white"}`,children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),e.label]},e.id))}),(0,a.jsxs)("div",{className:"md:col-span-3 space-y-8",children:["general"===N&&(0,a.jsxs)("div",{className:"bg-white rounded-3xl p-8 border border-gray-100 shadow-xl shadow-gray-200/50 space-y-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,a.jsx)(x.Info,{className:"w-6 h-6 text-blue-500"}),"Informations de base"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[o&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Identifiant Unique (Slug)"}),(0,a.jsx)("input",{type:"text",value:k.id,onChange:e=>P({...k,id:e.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"w-full px-5 py-3 bg-gray-50 border border-gray-100 rounded-2xl focus:ring-2 focus:ring-black outline-none transition-all",placeholder:"ex: bioactif",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Nom du Produit"}),(0,a.jsx)("input",{type:"text",value:k.name,onChange:e=>P({...k,name:e.target.value}),className:"w-full px-5 py-3 bg-gray-50 border border-gray-100 rounded-2xl focus:ring-2 focus:ring-black outline-none transition-all",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Description Commerciale"}),(0,a.jsx)("textarea",{value:k.description,onChange:e=>P({...k,description:e.target.value}),className:"w-full px-5 py-3 bg-gray-50 border border-gray-100 rounded-2xl focus:ring-2 focus:ring-black outline-none transition-all min-h-[150px] resize-none",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Slogan"}),(0,a.jsx)("input",{type:"text",value:k.tagline,onChange:e=>P({...k,tagline:e.target.value}),className:"w-full px-5 py-3 bg-gray-50 border border-gray-100 rounded-2xl focus:ring-2 focus:ring-black outline-none transition-all",placeholder:"ex: DIABÈTE • HYPERTENSION"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Catégorie"}),(0,a.jsx)("input",{type:"text",value:k.category,onChange:e=>P({...k,category:e.target.value}),className:"w-full px-5 py-3 bg-gray-50 border border-gray-100 rounded-2xl focus:ring-2 focus:ring-black outline-none transition-all",placeholder:"ex: HYPERTENSION"})]})]})]})]}),"media"===N&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(T,{slot:"image",label:"Photo Principale",sublabel:"Affichée dans les listes et en tête de page (Flacon/Packshot)",value:k.image}),(0,a.jsx)(T,{slot:"ingredients_image",label:"Détails Ingrédients",sublabel:"Photo expliquant la composition naturelle du produit",value:k.ingredients_image}),(0,a.jsx)(T,{slot:"infographic_image",label:"Infographie",sublabel:"Tableau ou graphique explicatif sur les bienfaits",value:k.infographic_image})]}),(0,a.jsxs)("div",{className:"bg-white rounded-3xl p-8 border border-gray-100 shadow-xl shadow-gray-200/50 space-y-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,a.jsx)(u,{className:"w-6 h-6 text-purple-500"}),"Galerie Lifestyle"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[k.gallery.map((e,s)=>(0,a.jsxs)("div",{className:"relative aspect-square rounded-2xl border border-gray-100 overflow-hidden group",children:[(0,a.jsx)("img",{src:e,alt:`Gallery ${s}`,className:"w-full h-full object-cover"}),(0,a.jsx)("button",{type:"button",onClick:()=>{P(e=>({...e,gallery:e.gallery.filter((e,a)=>a!==s)}))},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(d.Trash2,{className:"w-4 h-4"})})]},s)),(0,a.jsxs)("label",{className:"aspect-square rounded-2xl border-2 border-dashed border-gray-200 flex flex-col items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors",children:["gallery"===C?(0,a.jsx)(i.Loader2,{className:"w-6 h-6 animate-spin text-gray-400"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Plus,{className:"w-6 h-6 text-gray-400 mb-1"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Ajouter"})]}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>E(e,"gallery"),disabled:!!C})]})]})]})]}),"pricing"===N&&(0,a.jsxs)("div",{className:"bg-white rounded-3xl p-8 border border-gray-100 shadow-xl shadow-gray-200/50 space-y-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,a.jsx)(g.DollarSign,{className:"w-6 h-6 text-green-500"}),"Inventaire & Prix"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-2xl space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"p-2 bg-black text-white rounded-xl",children:(0,a.jsx)(g.DollarSign,{className:"w-5 h-5"})}),(0,a.jsx)("label",{className:"font-bold text-gray-700",children:"Prix de vente (FCFA)"})]}),(0,a.jsx)("input",{type:"number",value:k.price,onChange:e=>P({...k,price:parseInt(e.target.value)}),className:"w-full text-3xl font-bold bg-transparent border-none outline-none focus:ring-0",required:!0}),(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Prix affiché sur le site public."})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-2xl space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"p-2 bg-black text-white rounded-xl",children:(0,a.jsx)(h.Package,{className:"w-5 h-5"})}),(0,a.jsx)("label",{className:"font-bold text-gray-700",children:"Stock disponible"})]}),(0,a.jsx)("input",{type:"number",value:k.stock,onChange:e=>P({...k,stock:parseInt(e.target.value)}),className:"w-full text-3xl font-bold bg-transparent border-none outline-none focus:ring-0",required:!0}),(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:'Quantité restante avant "Indisponible".'})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-4 pt-4",children:(0,a.jsxs)("div",{className:"flex-1 p-6 bg-gray-50 rounded-2xl flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`p-2 rounded-xl ${k.is_active?"bg-green-100 text-green-600":"bg-gray-200 text-gray-500"}`,children:(0,a.jsx)(p.CheckCircle2,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-gray-700",children:"Statut de Visibilité"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:k.is_active?"Visible sur le site":"Masqué pour les clients"})]})]}),(0,a.jsx)("button",{type:"button",onClick:()=>P(e=>({...e,is_active:!e.is_active})),className:`w-14 h-8 rounded-full transition-all relative ${k.is_active?"bg-black":"bg-gray-300"}`,children:(0,a.jsx)("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition-all ${k.is_active?"right-1":"left-1"}`})})]})})]}),"content"===N&&(0,a.jsxs)("div",{className:"bg-white rounded-3xl p-8 border border-gray-100 shadow-xl shadow-gray-200/50 space-y-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,a.jsx)(m,{className:"w-6 h-6 text-orange-500"}),"Contenu Détaillé"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Liste des Bienfaits"}),(0,a.jsx)("textarea",{value:k.benefits,onChange:e=>P({...k,benefits:e.target.value}),className:"w-full px-5 py-3 bg-gray-50 border border-gray-100 rounded-2xl focus:ring-2 focus:ring-black outline-none transition-all min-h-[120px]",placeholder:"Séparez les bienfaits par des virgules (ex: 100% Naturel, Énergie pure...)"}),(0,a.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:k.benefits.split(",").map((e,s)=>e.trim()&&(0,a.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-medium",children:e.trim()},s))})]})]})]})]})]})}e.s(["default",()=>b],93609)},36566,e=>{"use strict";var a=e.i(43476),s=e.i(18566),l=e.i(93609);function t(){let e=(0,s.useParams)().id;return(0,a.jsx)("div",{className:"p-4 md:p-8",children:(0,a.jsx)(l.default,{productId:e})})}e.s(["default",()=>t])}]);