(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},7156,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(31278),l=e.i(71689);let n=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);function i(){let e,i,o=(0,a.useRouter)(),[c,d]=(0,s.useState)("phone"),[m,h]=(0,s.useState)(""),[u,x]=(0,s.useState)(["","","","","",""]),[p,f]=(0,s.useState)(!1),[b,g]=(0,s.useState)(""),[y,j]=(0,s.useState)(0),N=(0,s.useRef)([]),v=e=>{let t=e.replace(/\D/g,"");return t.length<=2?t:t.length<=4?`${t.slice(0,2)} ${t.slice(2)}`:t.length<=6?`${t.slice(0,2)} ${t.slice(2,4)} ${t.slice(4)}`:t.length<=8?`${t.slice(0,2)} ${t.slice(2,4)} ${t.slice(4,6)} ${t.slice(6)}`:`${t.slice(0,2)} ${t.slice(2,4)} ${t.slice(4,6)} ${t.slice(6,8)} ${t.slice(8,10)}`};(0,s.useEffect)(()=>{if(y>0){let e=setTimeout(()=>j(y-1),1e3);return()=>clearTimeout(e)}},[y]);let w=async e=>{e.preventDefault(),g(""),f(!0);try{let e=await fetch("http://localhost:3333/api/admin/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:m})}),t=await e.json();if(!e.ok)throw Error(t.error||"Erreur lors de l'envoi");d("otp"),j(300),x(["","","","","",""]),setTimeout(()=>N.current[0]?.focus(),100)}catch(e){g(e.message)}finally{f(!1)}},k=e=>{e.preventDefault();let t=e.clipboardData.getData("text").toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,6),s=[...u];for(let e=0;e<t.length;e++)s[e]=t[e];x(s),6===t.length?S(t):N.current[t.length]?.focus()},S=async e=>{g(""),f(!0);let t=e||u.join("");try{let e=await fetch("http://localhost:3333/api/admin/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:m,otp:t})}),s=await e.json();if(!e.ok)throw Error(s.error||"Code invalide");localStorage.setItem("admin_token",s.token),localStorage.setItem("admin_data",JSON.stringify(s.admin)),o.push("/admin")}catch(e){g(e.message),x(["","","","","",""]),N.current[0]?.focus()}finally{f(!1)}},C=async()=>{if(!(y>0)){g(""),f(!0);try{let e=await fetch("http://localhost:3333/api/admin/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:m})});if(!e.ok){let t=await e.json();throw Error(t.error||"Erreur")}j(300),x(["","","","","",""])}catch(e){g(e.message)}finally{f(!1)}}};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Santé Vitalité"}),(0,t.jsx)("p",{className:"text-white/50 mt-2",children:"Panneau d'administration"})]}),(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:"phone"===c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-black flex items-center justify-center",children:(0,t.jsx)(n,{className:"w-5 h-5 text-white"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Connexion Sécurisée"})]}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:"Entrez votre numéro de téléphone autorisé pour recevoir un code de connexion."}),b&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:b}),(0,t.jsxs)("form",{onSubmit:w,className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numéro de téléphone"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium",children:"+225"}),(0,t.jsx)("div",{className:"w-px h-5 bg-gray-300"})]}),(0,t.jsx)("input",{type:"tel",value:v(m),onChange:e=>h(e.target.value.replace(/\D/g,"").slice(0,10)),className:"w-full pl-[85px] pr-4 py-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all text-lg tracking-wide",placeholder:"07 XX XX XX XX",required:!0})]})]}),(0,t.jsx)("button",{type:"submit",disabled:p||m.length<10,className:"w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-gray-800 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Loader2,{className:"w-5 h-5 animate-spin"}),"Envoi en cours..."]}):"Recevoir le code SMS"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:()=>d("phone"),className:"flex items-center gap-2 text-gray-500 hover:text-black mb-4 transition-colors",children:[(0,t.jsx)(l.ArrowLeft,{className:"w-4 h-4"}),"Changer de numéro"]}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Vérification"}),(0,t.jsxs)("p",{className:"text-gray-500 mb-6",children:["Entrez le code à 6 caractères envoyé au ",(0,t.jsxs)("span",{className:"font-semibold text-black",children:["+225 ",v(m)]})]}),b&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:b}),(0,t.jsx)("div",{className:"flex gap-2 justify-center mb-6",children:u.map((e,s)=>(0,t.jsx)("input",{ref:e=>{N.current[s]=e},type:"text",value:e,onChange:e=>{let t,a;return t=e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(-1),void((a=[...u])[s]=t,x(a),t&&s<5&&N.current[s+1]?.focus(),a.every(e=>""!==e)&&5===s&&S(a.join("")))},onKeyDown:e=>{"Backspace"===e.key&&!u[s]&&s>0&&N.current[s-1]?.focus()},onPaste:0===s?k:void 0,className:"w-12 h-14 text-center text-xl font-bold border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-black focus:border-black outline-none transition-all uppercase",maxLength:1,disabled:p},s))}),(0,t.jsx)("div",{className:"text-center mb-6",children:y>0?(0,t.jsxs)("p",{className:"text-gray-500 text-sm",children:["Code expire dans ",(0,t.jsx)("span",{className:"font-bold text-black",children:(e=Math.floor(y/60),i=y%60,`${e}:${i.toString().padStart(2,"0")}`)})]}):(0,t.jsx)("button",{onClick:C,disabled:p,className:"text-black font-semibold text-sm hover:underline disabled:opacity-50",children:"Renvoyer le code"})}),(0,t.jsx)("button",{onClick:()=>S(),disabled:p||u.some(e=>!e),className:"w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-gray-800 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Loader2,{className:"w-5 h-5 animate-spin"}),"Vérification..."]}):"Se connecter"})]})}),(0,t.jsx)("p",{className:"text-center text-white/40 text-sm mt-6",children:"Seuls les numéros autorisés peuvent se connecter."})]})})}e.s(["default",()=>i],7156)}]);