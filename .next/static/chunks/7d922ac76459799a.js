(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let a=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},43432,e=>{"use strict";let a=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>a],43432)},63488,e=>{"use strict";let a=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>a],63488)},63209,e=>{"use strict";let a=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>a],63209)},86311,e=>{"use strict";let a=(0,e.i(75254).default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);e.s(["MessageSquare",()=>a],86311)},7486,e=>{"use strict";let a=(0,e.i(75254).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);e.s(["Building2",()=>a],7486)},56909,e=>{"use strict";let a=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},12426,e=>{"use strict";let a=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>a],12426)},95468,e=>{"use strict";let a=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],95468)},16715,e=>{"use strict";let a=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>a],16715)},44234,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(39616),l=e.i(43432),r=e.i(63488),i=e.i(12426),n=e.i(15788),c=e.i(7486),o=e.i(86311),d=e.i(56909),h=e.i(31278),m=e.i(95468),u=e.i(16715),x=e.i(63209);let g={payment:{label:"Paiement",icon:i.DollarSign,color:"from-emerald-500 to-teal-600"},contact:{label:"Contact",icon:l.Phone,color:"from-blue-500 to-indigo-600"},sms:{label:"SMS & OTP",icon:o.MessageSquare,color:"from-purple-500 to-violet-600"},delivery:{label:"Livraison",icon:n.Truck,color:"from-amber-500 to-orange-600"},business:{label:"Entreprise",icon:c.Building2,color:"from-gray-600 to-gray-800"}};function p(){let[e,i]=(0,t.useState)({}),[n,c]=(0,t.useState)([]),[o,p]=(0,t.useState)(!0),[y,f]=(0,t.useState)(!1),[v,b]=(0,t.useState)(""),[j,k]=(0,t.useState)(""),[N,w]=(0,t.useState)({}),[S,M]=(0,t.useState)("payment"),C=async()=>{p(!0),b("");try{let e=JSON.parse(localStorage.getItem("admin_data")||"{}"),a=await fetch("http://localhost:3333/api/admin/settings",{headers:{"X-Admin-Id":e.id}});if(!a.ok)throw Error("Erreur de chargement");let t=await a.json();i(t.settings),c(t.categories),t.categories.length>0&&!t.categories.includes(S)&&M(t.categories[0]);let s={};for(let e of Object.values(t.settings))for(let a of e)s[a.key]=a.value;w(s)}catch(e){b(e.message)}finally{p(!1)}};(0,t.useEffect)(()=>{C()},[]);let A=(e,a)=>{w(t=>({...t,[e]:a})),k("")},X=()=>{for(let a of Object.values(e))for(let e of a)if(N[e.key]!==e.value)return!0;return!1},O=async()=>{f(!0),b(""),k("");try{let a=JSON.parse(localStorage.getItem("admin_data")||"{}"),t=[];for(let a of Object.values(e))for(let e of a)N[e.key]!==e.value&&t.push({key:e.key,value:N[e.key]});if(0===t.length){k("Aucune modification à sauvegarder"),f(!1);return}let s=await fetch("http://localhost:3333/api/admin/settings/bulk",{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Id":a.id},body:JSON.stringify({settings:t})});if(!s.ok){let e=await s.json();throw Error(e.error||"Erreur de sauvegarde")}k(`${t.length} param\xe8tre(s) mis \xe0 jour avec succ\xe8s`),await C()}catch(e){b(e.message)}finally{f(!1)}};return o?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(h.Loader2,{className:"w-10 h-10 animate-spin text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Chargement des paramètres..."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Paramètres"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Configuration du système"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:C,className:"p-2.5 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition-all",children:(0,a.jsx)(u.RefreshCw,{className:"w-4 h-4"})}),(0,a.jsxs)("button",{onClick:O,disabled:y||!X(),className:"flex items-center gap-2 px-5 py-2.5 bg-black text-white rounded-xl hover:bg-gray-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[y?(0,a.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(d.Save,{className:"w-4 h-4"}),"Enregistrer"]})]})]}),v&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700",children:[(0,a.jsx)(x.AlertCircle,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("p",{children:v})]}),j&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-xl text-green-700",children:[(0,a.jsx)(m.CheckCircle2,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("p",{children:j})]}),(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:n.map(e=>{let t=g[e]||{label:e,icon:s.Settings,color:"from-gray-500 to-gray-600"},l=t.icon,r=S===e;return(0,a.jsxs)("button",{onClick:()=>M(e),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all whitespace-nowrap ${r?`bg-gradient-to-r ${t.color} text-white shadow-lg`:"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[(0,a.jsx)(l,{className:"w-4 h-4"}),t.label]},e)})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"grid gap-6",children:[e[S]?.map(e=>{let t,s,i;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-semibold text-gray-900",children:e.label}),N[e.key]!==e.value&&(0,a.jsx)("span",{className:"text-xs text-amber-600 font-medium",children:"Modifié"})]}),(s=(t=N[e.key]??e.value)!==e.value,i=`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all ${s?"border-amber-400 bg-amber-50":"border-gray-200"}`,"phone"===e.type?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Phone,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"tel",value:t,onChange:a=>{var t;let s;return A(e.key,(s=(t=a.target.value).replace(/\D/g,"")).startsWith("225")?"+"+s:!t.startsWith("+")&&s.length>0?"+225"+s:t)},className:`${i} pl-10`,placeholder:"+2250XXXXXXXXX"})]}):"email"===e.type?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(r.Mail,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"email",value:t,onChange:a=>A(e.key,a.target.value),className:`${i} pl-10`,placeholder:"email@example.com"})]}):"number"===e.type?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"number",value:t,onChange:a=>A(e.key,a.target.value),className:i,min:"0"}),"delivery"===e.category&&(0,a.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"FCFA"})]}):(0,a.jsx)("input",{type:"text",value:t,onChange:a=>A(e.key,a.target.value),className:i})),e.description&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.key)}),(!e[S]||0===e[S].length)&&(0,a.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,a.jsx)(s.Settings,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),(0,a.jsx)("p",{children:"Aucun paramètre dans cette catégorie"})]})]})})}),X()&&(0,a.jsxs)("div",{className:"fixed bottom-6 right-6 bg-amber-500 text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"font-medium",children:"Modifications non enregistrées"})]})]})}e.s(["default",()=>p])}]);