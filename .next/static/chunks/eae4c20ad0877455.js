(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},63059,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],63059)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},86311,e=>{"use strict";let t=(0,e.i(75254).default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);e.s(["MessageSquare",()=>t],86311)},78917,e=>{"use strict";let t=(0,e.i(75254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],78917)},1780,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(69638),l=e.i(75254);let r=(0,l.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var n=e.i(78917),i=e.i(43432),c=e.i(71689),d=e.i(31278),o=e.i(43531),m=e.i(3116);let x=(0,l.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),u=(0,l.default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var h=e.i(86311),b=e.i(63059),p=e.i(55057),f=e.i(22016),g=e.i(47163),j=e.i(2671);function v({params:e}){let{orderId:l}=(0,s.use)(e),[v,y]=(0,s.useState)("pending"),[N,w]=(0,s.useState)(null),[k,C]=(0,s.useState)(!0),[S,M]=(0,s.useState)(null),[E,F]=(0,s.useState)(""),[L,q]=(0,s.useState)(""),[P,T]=(0,s.useState)(!1),[z,D]=(0,s.useState)(!1),[V,R]=(0,s.useState)(!1),[A,W]=(0,s.useState)(j.defaultSettings),_=[{id:"wave",label:"Wave",color:"bg-[#1DC1EC]",textColor:"text-[#1DC1EC]",number:(0,j.formatPhoneDisplay)(A.payment.wave)},{id:"orange",label:"Orange",color:"bg-[#FF7900]",textColor:"text-[#FF7900]",number:(0,j.formatPhoneDisplay)(A.payment.orange)},{id:"mtn",label:"MTN",color:"bg-[#FFCC00]",textColor:"text-[#FFCC00]",number:(0,j.formatPhoneDisplay)(A.payment.mtn)},{id:"moov",label:"Moov",color:"bg-[#0066B3]",textColor:"text-[#0066B3]",number:(0,j.formatPhoneDisplay)(A.payment.moov)}];(0,s.useEffect)(()=>{let e=async()=>{try{let e=await p.api.verifyPayment(void 0,l);w(e.order),e.manualStatus&&y(e.manualStatus),C(!1)}catch(e){console.error("Error fetching payment status:",e),C(!1)}};e();let t=setInterval(e,15e3);return()=>clearInterval(t)},[l]),(0,s.useEffect)(()=>{(async()=>{W(await (0,j.getPublicSettings)())})()},[]);let B=async e=>{if(e.preventDefault(),E&&L&&N){T(!0);try{await p.api.submitReference({orderId:l,provider:E,reference:L,amount:N.total}),y("verifying")}catch(e){alert(e.response?.data?.message||"Erreur lors de la soumission")}finally{T(!1)}}},H=async e=>{if(e.preventDefault(),L&&N){T(!0);try{await p.api.submitReference({orderId:l,provider:"wave",reference:L,amount:N.total}),y("verifying")}catch(e){alert(e.response?.data?.message||"Erreur lors de la soumission")}finally{T(!1)}}},I=async e=>{let t=e.target.files?.[0];if(t){D(!0);try{await p.api.uploadProof(l,t),R(!0),y("verifying")}catch(e){console.error("Upload error:",e),alert("Erreur lors de l'envoi du reçu.")}finally{D(!1)}}};return k?(0,t.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(d.Loader2,{className:"w-8 h-8 text-slate-400 animate-spin mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-sm text-slate-400",children:"Chargement..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50 pb-12",children:[(0,t.jsx)("div",{className:"bg-white border-b border-slate-100",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,t.jsxs)(f.default,{href:"/",className:"flex items-center gap-2 text-slate-500 hover:text-slate-900 transition-colors",children:[(0,t.jsx)(c.ArrowLeft,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Retour"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-[10px] text-slate-400 uppercase font-medium",children:"Commande"}),(0,t.jsxs)("p",{className:"text-sm font-mono font-semibold text-slate-700",children:["#",l.slice(0,8).toUpperCase()]})]})]})}),(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4 pt-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-slate-100 mb-4",children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 mb-1",children:"Montant à payer"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-slate-900",children:(0,g.formatCurrency)(N?.total||0)})]}),(0,t.jsx)("div",{className:"bg-white rounded-2xl p-5 border border-slate-100 mb-4",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:[{id:"pending",label:"Transfert",icon:m.Clock},{id:"verifying",label:"Vérification",icon:x},{id:"success",label:"Validé",icon:a.CheckCircle}].map((e,a,l)=>{let r=l.findIndex(e=>e.id===v),n=a<r||"success"===v,i=e.id===v,c=e.icon;return(0,t.jsxs)(s.default.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:(0,g.cn)("w-10 h-10 rounded-full flex items-center justify-center mb-2 transition-all",n?"bg-green-500 text-white":i?"bg-slate-900 text-white":"bg-slate-100 text-slate-400"),children:n?(0,t.jsx)(o.Check,{className:"w-5 h-5"}):(0,t.jsx)(c,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:(0,g.cn)("text-xs font-medium",i?"text-slate-900":"text-slate-400"),children:e.label})]}),a<l.length-1&&(0,t.jsx)("div",{className:(0,g.cn)("flex-1 h-0.5 mx-2",a<r?"bg-green-500":"bg-slate-100")})]},e.id)})})}),N?.payment_method==="wave"&&"pending"===v&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-4 mb-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-500 rounded-xl text-white",children:(0,t.jsx)(h.MessageSquare,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-slate-900 mb-1",children:"Lien Wave envoyé par SMS"}),(0,t.jsxs)("p",{className:"text-sm text-slate-600 mb-3",children:["Vérifiez vos SMS pour payer ",(0,g.formatCurrency)(N?.total||0)]}),(0,t.jsxs)("a",{href:`https://pay.wave.com/m/M_ci_m4MFE02NW-Wi/c/ci/?amount=${Math.round(N?.total||0)}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-600 transition-colors",children:[(0,t.jsx)(n.ExternalLink,{className:"w-4 h-4"}),"Ouvrir Wave"]})]})]})}),(0,t.jsxs)("form",{onSubmit:H,className:"bg-white rounded-2xl p-4 border border-slate-100 mb-4",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-500 block mb-2",children:"ID Transaction Wave (code SMS)"}),(0,t.jsx)("input",{type:"text",value:L,onChange:e=>q(e.target.value),placeholder:"Ex: W123456789",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-mono focus:outline-none focus:border-slate-400 mb-3",required:!0}),(0,t.jsx)("button",{type:"submit",disabled:P||!L,className:"w-full bg-blue-500 text-white py-3 rounded-xl font-medium text-sm hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:P?(0,t.jsx)(d.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:["Valider le paiement Wave ",(0,t.jsx)(b.ChevronRight,{className:"w-4 h-4"})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 mb-4",children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 text-center mb-3",children:"ou envoyez une capture d'écran"}),(0,t.jsxs)("label",{className:"flex items-center justify-center gap-3 p-4 border-2 border-dashed border-blue-200 rounded-xl cursor-pointer hover:bg-blue-50 transition-colors",children:[(0,t.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:I,disabled:z}),z?(0,t.jsx)(d.Loader2,{className:"w-5 h-5 animate-spin text-blue-400"}):V?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.CheckCircle,{className:"w-5 h-5 text-green-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Envoyé !"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{className:"w-5 h-5 text-blue-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"Envoyer une capture"})]})]})]})]}),"success"===v&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-100 rounded-2xl p-6 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(o.Check,{className:"w-8 h-8 text-white"})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Paiement validé !"}),(0,t.jsx)("p",{className:"text-slate-600 text-sm mb-4",children:"Un agent va vous appeler pour confirmer la livraison."}),(0,t.jsx)(f.default,{href:"/",className:"inline-block bg-slate-900 text-white px-6 py-3 rounded-xl font-medium text-sm hover:bg-slate-800 transition-colors",children:"Retour à l'accueil"})]}),"verifying"===v&&(0,t.jsxs)("div",{className:"bg-white border border-slate-100 rounded-2xl p-8 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Vérification en cours"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm",children:"Nous vérifions votre transfert. Cette page s'actualise automatiquement."})]}),"pending"===v&&N?.payment_method!=="wave"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 mb-4",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-500 block mb-3",children:"Sélectionnez votre opérateur"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:_.filter(e=>"wave"!==e.id).map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>F(e.id),className:(0,g.cn)("flex flex-col items-center p-3 rounded-xl border transition-all",E===e.id?"bg-slate-900 border-slate-900 text-white":"bg-slate-50 border-slate-100 text-slate-700 hover:border-slate-200"),children:[(0,t.jsx)("img",{src:`/logos/${e.id}.png`,alt:e.label,className:"w-8 h-8 rounded-full object-contain mb-1.5",onError:e=>{let t=e.target;t.style.display="none",t.nextElementSibling?.classList.remove("hidden")}}),(0,t.jsx)("div",{className:(0,g.cn)("w-8 h-8 rounded-full flex items-center justify-center mb-1.5 text-white font-bold text-xs hidden",e.color),children:"orange"===e.id?"OM":"mtn"===e.id?"M":"Mo"}),(0,t.jsx)("span",{className:"text-[10px] font-semibold uppercase",children:e.label})]},e.id))}),E&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-green-50 rounded-xl border border-green-200",children:[(0,t.jsxs)("p",{className:"text-xs font-medium text-green-700 mb-2 flex items-center gap-1",children:[(0,t.jsx)(o.Check,{className:"w-3 h-3"}),"Transférer à ce numéro ",_.find(e=>e.id===E)?.label]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xl font-mono font-bold text-green-800",children:_.find(e=>e.id===E)?.number}),(0,t.jsx)("button",{onClick:()=>{var e;let t=_.find(e=>e.id===E)?.number;t&&(e=t.replace(/\s/g,""),navigator.clipboard.writeText(e),M("provider-num"),setTimeout(()=>M(null),2e3))},className:"p-2 bg-green-200 rounded-lg hover:bg-green-300 transition-colors",children:"provider-num"===S?(0,t.jsx)(o.Check,{className:"w-4 h-4 text-green-700"}):(0,t.jsx)(r,{className:"w-4 h-4 text-green-600"})})]})]})]}),(0,t.jsxs)("form",{onSubmit:B,className:"bg-white rounded-2xl p-4 border border-slate-100 mb-4",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-slate-500 block mb-2",children:"ID Transaction (code SMS)"}),(0,t.jsx)("input",{type:"text",value:L,onChange:e=>q(e.target.value),placeholder:"Ex: 1234567890",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-mono focus:outline-none focus:border-slate-400 mb-3",required:!0}),(0,t.jsx)("button",{type:"submit",disabled:P||!L||!E,className:"w-full bg-slate-900 text-white py-3 rounded-xl font-medium text-sm hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:P?(0,t.jsx)(d.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:["Valider le paiement ",(0,t.jsx)(b.ChevronRight,{className:"w-4 h-4"})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 mb-4",children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 text-center mb-3",children:"ou envoyez une capture d'écran"}),(0,t.jsxs)("label",{className:"flex items-center justify-center gap-3 p-4 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,t.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:I,disabled:z}),z?(0,t.jsx)(d.Loader2,{className:"w-5 h-5 animate-spin text-slate-400"}):V?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.CheckCircle,{className:"w-5 h-5 text-green-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Envoyé !"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{className:"w-5 h-5 text-slate-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-600",children:"Envoyer une capture"})]})]})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-2xl p-4 border border-slate-100",children:(0,t.jsxs)("a",{href:`https://wa.me/${A.contact_whatsapp.replace(/\+/g,"")}`,target:"_blank",className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:(0,t.jsx)(i.Phone,{className:"w-5 h-5 text-white"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Besoin d'aide ?"})]}),(0,t.jsx)(n.ExternalLink,{className:"w-4 h-4 text-slate-400"})]})})]})]})}e.s(["default",()=>v],1780)}]);